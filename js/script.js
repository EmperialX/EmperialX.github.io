function initScrollAnimations(){const e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&!e.target.classList.contains("glass-card")&&e.target.classList.add("active")}))}),{threshold:.1});document.querySelectorAll(".section-reveal").forEach((t=>{e.observe(t)}))}function initTerminalEffect(){let e=["whoami ","> 0xiZen","init 6","./0xiZen.sh"],t=document.querySelector(".typed-text"),o=document.querySelector(".cursor"),r=0,c=0,s=!1;!function n(){if(!t||!o)return;let a=e[r];s?(c--,t.textContent=a.substring(0,c)):(c++,t.textContent=a.substring(0,c));let l=s?50:100;s||c!==a.length?s&&0===c&&(s=!1,r=(r+1)%e.length,l=500):(l=2e3,s=!0),setTimeout(n,l)}()}document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".scroll-progress-bar"),t=document.querySelector(".electric-line"),o=document.querySelector(".scroll-indicator"),r=document.getElementById("scroll-to-top"),c=document.querySelector(".chat-trigger"),s=document.querySelector(".chat-box"),n=document.querySelector(".close-chat"),a=document.getElementById("contactForm"),l=document.querySelector(".theme-toggle"),i=window.matchMedia("(prefers-color-scheme: dark)"),d=document.querySelector(".theme-toggle"),m=d.querySelector("i"),u=window.matchMedia("(prefers-color-scheme: dark)");function h(e){document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),m.className="dark"===e?"fas fa-moon":"fas fa-sun",window.terminal&&window.terminal.addToOutput(`Theme switched to ${e} mode`,"terminal-success")}function g(e){document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),l.querySelector("i").className="dark"===e?"fas fa-moon":"fas fa-sun",document.querySelector('meta[name="theme-color"]').setAttribute("content","dark"===e?"#39BAE6":"#0284c7")}function y(){const r=document.documentElement.scrollHeight-window.innerHeight,c=window.scrollY/r*100;document.documentElement.style.setProperty("--scroll-position",`${c}%`),e&&(e.style.height=`${c}%`),t&&(t.style.height=`${c}%`,t.style.boxShadow=`0 0 ${10+c/10}px var(--ayu-accent)`),document.querySelectorAll(".parallax-section").forEach((e=>{const t=e.getBoundingClientRect().top/window.innerHeight*50;e.style.setProperty("--parallax-offset",`${t}px`)})),document.documentElement.dataset.scroll=window.scrollY,o&&(o.classList.add("scrolling"),clearTimeout(window.scrollTimeout),window.scrollTimeout=setTimeout((()=>{o.classList.remove("scrolling")}),150))}function f(){r&&((window.scrollY||window.pageYOffset)>300?r.classList.add("visible"):r.classList.remove("visible"))}h(localStorage.getItem("theme")||(u.matches?"dark":"light")),d.addEventListener("click",(()=>{h("dark"===document.documentElement.getAttribute("data-theme")?"light":"dark")})),u.addEventListener("change",(e=>{localStorage.getItem("theme")||h(e.matches?"dark":"light")})),window.addEventListener("terminal-theme-change",(e=>{h(e.detail.theme)})),l.addEventListener("click",(()=>{g("dark"===document.documentElement.getAttribute("data-theme")?"light":"dark")})),i.addEventListener("change",(e=>{g(e.matches?"dark":"light")})),r&&r.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),c&&s&&n&&(c.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),s.classList.toggle("active")})),n.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),s.classList.remove("active")})),document.addEventListener("click",(e=>{s.contains(e.target)||c.contains(e.target)||s.classList.remove("active")})),s.addEventListener("click",(e=>{e.stopPropagation()}))),a&&a.addEventListener("submit",(async e=>{e.preventDefault();const t=new FormData(a),o=Object.fromEntries(t);try{console.log("Message to send:",o),a.reset(),s&&s.classList.remove("active"),alert("Message sent successfully!")}catch(e){console.error("Error sending message:",e),alert("Failed to send message. Please try again.")}})),function(){const e=document.querySelectorAll(".section-reveal"),t=document.querySelector(".section-overlay");let o=null,r=!1;const c=new IntersectionObserver((e=>{e.forEach((e=>{if(!r&&e.isIntersecting){r=!0;const c=e.target;if(c.closest(".hero"))return void(r=!1);o&&o!==c&&o.classList.remove("active"),t&&t.classList.add("active"),setTimeout((()=>{c.classList.add("active"),o=c,setTimeout((()=>{r=!1,t&&t.classList.remove("active")}),600)}),100)}}))}),{threshold:.2,rootMargin:"-10% 0px -10% 0px"});e.forEach((e=>{e.closest(".hero")||c.observe(e)}))}(),document.querySelector("header")?.classList.add("fade-in"),document.querySelector(".hero-content")?.classList.add("fade-in"),document.querySelector(".hero-image")?.classList.add("fade-in"),document.querySelectorAll("section").forEach((e=>{e.classList.add("reveal")})),document.querySelectorAll(".nav-links, .skills-grid, .writeups-grid").forEach((e=>{e.classList.add("stagger-children")}));const v=document.querySelectorAll(".filter-btn"),E=document.querySelectorAll(".project-card");v.forEach((e=>{e.addEventListener("click",(()=>{v.forEach((e=>e.classList.remove("active"))),e.classList.add("active");const t=e.getAttribute("data-filter");E.forEach((e=>{"all"===t||e.getAttribute("data-category")===t?(e.style.display="block",setTimeout((()=>e.style.opacity="1"),0)):(e.style.opacity="0",setTimeout((()=>e.style.display="none"),300))}))}))}));const p=document.querySelectorAll(".category-btn"),w=document.querySelectorAll(".challenge-card");p.length>0&&p.forEach((e=>{e.addEventListener("click",(()=>{p.forEach((e=>e.classList.remove("active"))),e.classList.add("active");const t=e.getAttribute("data-category");w.forEach((e=>{"all"===t||e.getAttribute("data-category")===t?(e.style.display="flex",setTimeout((()=>{e.style.opacity="1",e.style.transform="translateY(0)"}),10)):(e.style.opacity="0",e.style.transform="translateY(20px)",setTimeout((()=>{e.style.display="none"}),300))}))}))}));let L=!1;window.addEventListener("scroll",(()=>{L||(window.requestAnimationFrame((()=>{y(),f(),L=!1})),L=!0)}));let S=0;window.addEventListener("scroll",(()=>{const e=Date.now();e-S>=10&&(requestAnimationFrame(y),S=e)})),function(){const e=document.querySelectorAll(".section-reveal"),t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("active"),e.target.style.setProperty("--shimmer-offset",100*Math.random()+"%"))}))}),{threshold:.1,rootMargin:"-50px"});e.forEach((e=>t.observe(e)))}(),function(){const e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("active")}))}),{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".reveal, .fade-up, .fade-in").forEach((t=>{e.observe(t)}))}(),y(),f(),initTerminalEffect(),initScrollAnimations()}));